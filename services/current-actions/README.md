# Current Actions Service

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ë—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å `current-actions` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º "–¢–µ–∫—É—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è" (Next Actions) –≤ —Ä–∞–º–∫–∞—Ö –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ GTD. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —á—Ç–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

*   C++ (C++20)
*   –§—Ä–µ–π–º–≤–æ—Ä–∫ `userver`
*   PostgreSQL (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö)
*   CMake/Make (–¥–ª—è —Å–±–æ—Ä–∫–∏)

## üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å—Ö–µ–º—É –∏–ª–∏ –Ω–∞–±–æ—Ä —Ç–∞–±–ª–∏—Ü –≤ –æ–±—â–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL. –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–∏—Ö –∑–∞–¥–∞—á –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

*   **`current_action_tasks`**:
    *   `id` (UUID, PK)
    *   `user_id` (BIGINT, FK to users table or just identifier)
    *   `title` (TEXT, NOT NULL)
    *   `description` (TEXT, nullable)
    *   `created_at` (TIMESTAMP WITH TIME ZONE, NOT NULL)
    *   `updated_at` (TIMESTAMP WITH TIME ZONE, NOT NULL)
    *   `due_date` (TIMESTAMP WITH TIME ZONE, nullable)
    *   `status` (VARCHAR, e.g., 'active', 'completed', 'deferred', 'deleted')
    *   `gtd_list_type` (VARCHAR, const 'current_actions') // –î–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
    *   ... –¥—Ä—É–≥–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è (–∫–æ–Ω—Ç–µ–∫—Å—Ç, –ø—Ä–æ–µ–∫—Ç –∏ —Ç.–¥.)

–°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `postgresql/`.

## üåê API (–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST-–ø–æ–¥–æ–±–Ω—ã–π HTTP API:

*   `GET /v1/tasks?user_id=<user_id>&limit=<N>&cursor=<cursor>`: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π).
*   `POST /v1/tasks`: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É.
    *   –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON): `{ "user_id": "...", "title": "...", "description": "..." }`
*   `GET /v1/tasks/{task_id}?user_id=<user_id>`: –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–µ.
*   `PUT /v1/tasks/{task_id}`: –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ).
    *   –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON): `{ "user_id": "...", "title": "–Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" }`
*   `POST /v1/tasks/{task_id}/complete`: –ü–æ–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é.
    *   –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON): `{ "user_id": "..." }`
*   `POST /v1/tasks/{task_id}/defer`: –û—Ç–ª–æ–∂–∏—Ç—å –∑–∞–¥–∞—á—É (–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `sometime-later`).
    *   –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON): `{ "user_id": "..." }`
    *   *–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ `sometime-later` –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏ –æ–∂–∏–¥–∞—Ç—å, —á—Ç–æ `telegram-bot` —Å–¥–µ–ª–∞–µ—Ç –Ω—É–∂–Ω—ã–µ –≤—ã–∑–æ–≤—ã.*
*   `DELETE /v1/tasks/{task_id}?user_id=<user_id>`: –õ–æ–≥–∏—á–µ—Å–∫–∏ –∏–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É.

–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–µ—Ç–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenAPI –≤ `docs/`).

## üöÄ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. `Dockerfile` –∏ `Makefile` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ —É–ø—Ä–∞–≤–ª—è—é—Ç —ç—Ç–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º.

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ (–ø—Ä–∏–º–µ—Ä–Ω–æ):
1.  `mkdir build-debug && cd build-debug`
2.  `cmake .. -DCMAKE_BUILD_TYPE=Debug`
3.  `make -jN`
4.  –ó–∞–ø—É—Å–∫ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—É—Ç–∏ –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º—É —Ñ–∞–π–ª—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `configs/config.yaml`).
