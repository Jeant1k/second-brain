# Sometime/Later Service

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ë—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å `sometime-later` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º "–ö–æ–≥–¥–∞-–Ω–∏–±—É–¥—å/–ú–æ–∂–µ—Ç –±—ã—Ç—å" (Sometime/Maybe) –≤ —Ä–∞–º–∫–∞—Ö –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ GTD. –û–Ω —Ö—Ä–∞–Ω–∏—Ç –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è, –Ω–æ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—Ç–µ–ª –±—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ –±—É–¥—É—â–µ–º.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

*   C++ (C++20)
*   –§—Ä–µ–π–º–≤–æ—Ä–∫ `userver`
*   PostgreSQL (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö)
*   CMake/Make (–¥–ª—è —Å–±–æ—Ä–∫–∏)

## üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ—é —Å—Ö–µ–º—É –∏–ª–∏ –Ω–∞–±–æ—Ä —Ç–∞–±–ª–∏—Ü –≤ –æ–±—â–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL. –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á:

*   **`sometime_later_tasks`**:
    *   `id` (UUID, PK)
    *   `user_id` (BIGINT)
    *   `title` (TEXT, NOT NULL)
    *   `description` (TEXT, nullable)
    *   `created_at` (TIMESTAMP WITH TIME ZONE, NOT NULL)
    *   `updated_at` (TIMESTAMP WITH TIME ZONE, NOT NULL)
    *   `status` (VARCHAR, e.g., 'deferred', 'activated', 'completed', 'deleted')
    *   `gtd_list_type` (VARCHAR, const 'sometime_later')
    *   ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è.

–°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `postgresql/`.

## üåê API (–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST-–ø–æ–¥–æ–±–Ω—ã–π HTTP API:

*   `GET /v1/tasks?user_id=<user_id>&limit=<N>&cursor=<cursor>`: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.
*   `POST /v1/tasks`: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –∏–∑ `current-actions`).
    *   –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON): `{ "user_id": "...", "title": "...", "description": "..." }`
*   `GET /v1/tasks/{task_id}?user_id=<user_id>`: –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–¥–∞—á–µ.
*   `PUT /v1/tasks/{task_id}`: –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ).
    *   –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON): `{ "user_id": "...", "title": "..." }`
*   `POST /v1/tasks/{task_id}/complete`: –ü–æ–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é.
    *   –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON): `{ "user_id": "..." }`
*   `POST /v1/tasks/{task_id}/activate`: –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –≤ —Å–ø–∏—Å–æ–∫ "–¢–µ–∫—É—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è" (`current-actions`).
    *   –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON): `{ "user_id": "..." }`
*   `DELETE /v1/tasks/{task_id}?user_id=<user_id>`: –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É.

## üöÄ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å–µ—Ä–≤–∏—Å—É `current-actions`. –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Dockerfile` –∏ `Makefile`.
