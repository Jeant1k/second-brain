# Calendar Service

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°–µ—Ä–≤–∏—Å `calendar` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.ics` (iCalendar). –≠—Ç–∏ —Ñ–∞–π–ª—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–¥–∞—á–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å, –∏–∑ —Å–ø–∏—Å–∫–∞ "–¢–µ–∫—É—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è" –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ "–ö–∞–ª–µ–Ω–¥–∞—Ä—å" GTD), –∏–º–µ—é—â–∏—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ä–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–ª–∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞–∫ —Å–æ–±—ã—Ç–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ `.ics` —Ñ–∞–π–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (Google Calendar, Outlook Calendar, Apple Calendar –∏ –¥—Ä.).

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

*   C++ (C++20)
*   –§—Ä–µ–π–º–≤–æ—Ä–∫ `userver`
*   –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ `.ics` (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∞–º–æ–ø–∏—Å–Ω–æ–π –∏–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π, –µ—Å–ª–∏ —Ç–∞–∫–æ–≤–∞—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è C++ –∏ userver).
*   –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ—Å—Ç—É–ø –∫ PostgreSQL –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞–¥–∞—á–∞—Ö, –ª–∏–±–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ C++ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `current-actions`) –ø–æ HTTP.

## üóÉÔ∏è –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

–°–µ—Ä–≤–∏—Å –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–¥–∞—á–∞—Ö –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å:
1.  **–ù–∞–ø—Ä—è–º—É—é –∏–∑ PostgreSQL:** –ß–∏—Ç–∞—è —Ç–∞–±–ª–∏—Ü—ã, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏–µ –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `current_action_tasks`), —Ñ–∏–ª—å—Ç—Ä—É—è –∑–∞–¥–∞—á–∏ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π `due_date`.
2.  **–ß–µ—Ä–µ–∑ API –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:** –î–µ–ª–∞—è –∑–∞–ø—Ä–æ—Å—ã –∫ `current-actions` –∏ –¥—Ä—É–≥–∏–º —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º —Å–µ—Ä–≤–∏—Å–∞–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á —Å –¥–∞—Ç–∞–º–∏.

–í—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π (—Å—Ç–µ–ø–µ–Ω—å –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤).

## üåê API (–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)

–û—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è `.ics` —Ñ–∞–π–ª–∞:

*   `GET /v1/calendar/export.ics?user_id=<user_id>&date_range_start=<YYYY-MM-DD>&date_range_end=<YYYY-MM-DD>`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
        *   `user_id`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
        *   `date_range_start` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ –ø–µ—Ä–∏–æ–¥–∞ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞.
        *   `date_range_end` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ –ø–µ—Ä–∏–æ–¥–∞ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞.
    *   **–û—Ç–≤–µ—Ç:**
        *   `Content-Type: text/calendar`
        *   –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞: –°–æ–¥–µ—Ä–∂–∏–º–æ–µ `.ics` —Ñ–∞–π–ª–∞.

## üöÄ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. `Dockerfile` (–µ—Å–ª–∏ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ userver `Dockerfile`) –∏ `Makefile` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ —É–ø—Ä–∞–≤–ª—è—é—Ç —ç—Ç–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º.

–ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª–µ–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–º (–≤ –æ—Å–Ω–æ–≤–Ω–æ–º, –ª–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞), –µ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—â–µ, —á–µ–º —É —Å–µ—Ä–≤–∏—Å–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω—ã–º —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –æ–Ω –Ω–∞–ø—Ä—è–º—É—é —á–∏—Ç–∞–µ—Ç –∏–∑ –ë–î, –µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –∏–ª–∏ –∏–Ω–¥–µ–∫—Å–æ–≤, –µ—Å–ª–∏ —ç—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã (–≤ `postgresql/`).
